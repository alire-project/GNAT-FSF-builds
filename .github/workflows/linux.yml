name: GNAT Linux
on:
  #schedule:
  #  - cron:  '0 0 * * *'
  #push:
  pull_request:


jobs:
  gnat_gprbuild:
    name: GNAT Linux and GPRbuild
    runs-on: ubuntu-18.04
    steps:
    - name: Checkout Project
      uses: actions/checkout@v2

    - uses: pguyot/arm-runner-action@v1
      with:
        image_additional_mb: 4096
        commands: |
            uname -a
            sudo apt-get -y install python3 python3-pip gnat
            pip3 install e3-core
            ./anod build gcc -v --loglevel DEBUG --enable-cleanup

    #       - name: Set up Python
    #   uses: actions/setup-python@v2
    #   with:
    #     python-version: 3.8

    # - name: Install Python dependencies
    #   run: |
    #     python -m pip install --upgrade pip
    #     pip install e3-core
    # - name: Install Ada dependencies
    #   run: sudo apt-get install gnat

    # - name: Build GNAT native
    #   run: ./anod build gcc -v --loglevel DEBUG --enable-cleanup

    # - name: Build GDB
    #   run: ./anod build gdb -v --loglevel DEBUG --enable-cleanup

    # - name: Package GNAT
    #   run: ./anod build release_package --qualifier=package=gnat,do_gh_release -v --loglevel DEBUG
    #   env:
    #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # for GitHub CLI tool

    # - name: Build GPRbuild
    #   run: ./anod build gprbuild -v --loglevel DEBUG --enable-cleanup

    # - name: Package GPRbuild
    #   run: ./anod build release_package --qualifier=package=gprbuild,do_gh_release -v --loglevel DEBUG
    #   env:
    #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # for GitHub CLI tool

    # - uses: actions/upload-artifact@v2
    #   with:
    #     name: anod-artifacts
    #     path: out_artifacts/*
    #     retention-days: 1

    # - uses: actions/upload-artifact@v2
    #   with:
    #     name: release-packages
    #     path: sbx/*/release_package*/install/*
    #     retention-days: 5
